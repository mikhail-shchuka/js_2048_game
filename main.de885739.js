parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){return o(e)||n(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(){I.innerHTML="";for(var e=0;e<k;e++)for(var t=0;t<k;t++){var r=document.createElement("div");r.className="field-cell",r.id="".concat(e+"-"+t),I.append(r)}w.firstElementChild.after(I),w.style.width=k*L+(k-1)*b+"px"}function i(){var e=Math.random(),t=Math.floor(Math.random()*k),r=Math.floor(Math.random()*k),n=2;(e<=.1&&(n=4),0===M[t][r])?(M[t][r]=n,u(document.getElementById("".concat(t+"-"+r)),n)):i()}function u(e,t){e.innerText=0===t?"":t,e.className="",e.classList.add("field-cell"),e.classList.add("field-cell--".concat(t))}function s(e,t){T=!1;for(var r=0;r<k;r++){var n=M[r];if("right"===e&&n.reverse(),n=d(n,t),"right"===e&&n.reverse(),M[r]=n,!t)for(var o=0;o<k;o++){u(document.getElementById("".concat(r+"-"+o)),M[r][o])}}}function l(e,t){T=!1;for(var r=0;r<k;r++){for(var n=[],o=0;o<k;o++)n.push(M[o][r]);if("down"===e&&n.reverse(),n=d(n,t),"down"===e&&n.reverse(),!t)for(var c=0;c<k;c++){M[c][r]=n[c],u(document.getElementById("".concat(c+"-"+r)),M[c][r])}}}function d(e,t){for(var r=e.filter(function(e){return 0!==e}),n=0;n<r.length-1;n++)r[n]===r[n+1]&&(r[n]*=2,r[n+1]=0,t||(S+=r[n],E.innerText=S),2048===r[n]&&(g.querySelector(".message-win").classList.remove("hidden"),document.removeEventListener("keydown",f)));for(r=r.filter(function(e){return 0!==e});r.length<k;)r.push(0);for(var o=0;o<k;o++)if(r[o]!==e[o]){T=!0;break}return r}function f(e){switch(e.key){case"ArrowLeft":s("left");break;case"ArrowRight":s("right");break;case"ArrowUp":l("up");break;case"ArrowDown":l("down")}if(T)i();else{if(M.some(function(e){return e.some(function(e){return 0===e})}))return 0;var t=M.map(function(e){return e.slice()});l("up","check"),T||(l("down","check"),T||(l("right","check"),T||l("left","check"))),T?(T=!1,M=t):(document.removeEventListener("keydown",f),document.removeEventListener("touchmove",m),document.removeEventListener("touchstart",v),document.removeEventListener("touchend",h),g.querySelector(".message-lose").classList.remove("hidden"))}}function m(e){e.preventDefault()}function v(e){q=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]}function h(e){var t=(x=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]).map(function(e,t){return e-q[t]});0===t[0]&&0===t[1]||(Math.abs(t[0])>Math.abs(t[1])?t[0]>0?f({key:"ArrowRight"}):f({key:"ArrowLeft"}):t[1]>0?f({key:"ArrowDown"}):f({key:"ArrowUp"}))}var y=document.querySelector(".start"),g=document.querySelector(".message-container"),p=document.querySelector(".levels"),E=document.querySelector(".game-score"),w=document.querySelector(".container"),L=75,b=10,A=!1,k=4,S=0,T=!1,M=Array(k).fill([]).map(function(e){return Array(k).fill(0)}),q=[],x=[],I=document.createElement("div");I.className="game-field",a(),p.addEventListener("click",function(e){if(e.target.matches(".level")&&k!==+e.target.value&&(k=+e.target.value,e.target.classList.add("selected"),e.target.nextElementSibling?e.target.nextElementSibling.classList.remove("selected"):e.target.previousElementSibling.classList.remove("selected"),M=Array(k).fill([]).map(function(e){return Array(k).fill(0)}),a(),A)){var t=new MouseEvent("click");y.dispatchEvent(t)}}),y.addEventListener("click",function(t){A?(M=Array(k).fill([]).map(function(e){return Array(k).fill(0)}),S=0,e(I.children).forEach(function(e){u(e,0)})):(t.currentTarget.innerText="Restart",t.currentTarget.className="button restart",A=!0),t.currentTarget.blur(),e(g.children).forEach(function(e){e.classList.add("hidden")}),i(),i(),document.addEventListener("keydown",f),document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchstart",v),document.addEventListener("touchend",h)});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.de885739.js.map